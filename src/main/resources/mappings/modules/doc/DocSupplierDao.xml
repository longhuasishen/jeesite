<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.thinkgem.jeesite.modules.doc.dao.DocSupplierDao">
    
	<sql id="docSupplierColumns">
		a.id AS "id",
		a.sup_code AS "supCode",
		a.sup_name AS "supName",
		a.sup_short_name AS "supShortName",
		a.sup_type  AS "archiveSupplier.id",
		a.sup_area AS "supArea",
		a.sup_industry AS "supIndustry",
		a.sup_settle AS "supSettle",
		a.sup_licence AS "supLicence",
		a.sup_taxno AS "supTaxno",
		a.sup_bank AS "supBank",
		a.sup_account AS "supAccount",
		a.sup_corporate AS "supCorporate",
		a.sup_agent AS "supAgent",
		a.sup_corporate_idno AS "supCorporateIdno",
		a.sup_agent_idno AS "supAgentIdno",
		a.sup_corporate_job AS "supCorporateJob",
		a.sup_agent_job AS "supAgentJob",
		a.sup_corporate_mobile AS "supCorporateMobile",
		a.sup_agent_mobile AS "supAgentMobile",
		a.sup_post_code AS "supPostCode",
		a.sup_contact AS "supContact",
		a.sup_email AS "supEmail",
		a.sup_address AS "supAddress",
		a.sup_salesman AS "supSalesman",
		a.sup_project_state AS "supProjectState",
		a.is_stop_trans AS "isStopTrans",
		a.ext_field1 AS "extField1",
		a.ext_field2 AS "extField2",
		a.ext_field3 AS "extField3",
		a.remark AS "remark",
		c.supplier_code AS "archiveSupplier.supplierCode",
		c.supplier_name AS "archiveSupplier.supplierName",
		i.industry_name AS "archiveIndustry.industryName",
		i.industry_code AS "archiveIndustry.industryCode"
	</sql>
	
	<sql id="docSupplierJoins">
		LEFT JOIN archive_supplier c ON c.id = a.sup_type
		LEFT JOIN archive_industry i ON i.id = a.sup_industry
	</sql>
    
	<select id="get" resultType="DocSupplier">
		SELECT 
			<include refid="docSupplierColumns"/>
		FROM doc_supplier a
		<include refid="docSupplierJoins"/>
		WHERE a.id = #{id}
	</select>
	
	<select id="findList" resultType="DocSupplier">
		SELECT 
			<include refid="docSupplierColumns"/>
		FROM doc_supplier a
		<include refid="docSupplierJoins"/>
		<where>
			
		</where>
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<select id="findAllList" resultType="DocSupplier">
		SELECT 
			<include refid="docSupplierColumns"/>
		FROM doc_supplier a
		<include refid="docSupplierJoins"/>
		<where>
			
		</where>		
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
			<otherwise>
			</otherwise>
		</choose>
	</select>
	
	<insert id="insert">
		INSERT INTO doc_supplier(
			sup_code,
			sup_name,
			sup_short_name,
			sup_type,
			sup_area,
			sup_industry,
			sup_settle,
			sup_licence,
			sup_taxno,
			sup_bank,
			sup_account,
			sup_corporate,
			sup_agent,
			sup_corporate_idno,
			sup_agent_idno,
			sup_corporate_job,
			sup_agent_job,
			sup_corporate_mobile,
			sup_agent_mobile,
			sup_post_code,
			sup_contact,
			sup_email,
			sup_address,
			sup_salesman,
			sup_project_state,
			is_stop_trans,
			ext_field1,
			ext_field2,
			ext_field3,
			remark
		) VALUES (
			#{supCode},
			#{supName},
			#{supShortName},
			#{archiveSupplier.id},
			#{supArea},
			#{supIndustry},
			#{supSettle},
			#{supLicence},
			#{supTaxno},
			#{supBank},
			#{supAccount},
			#{supCorporate},
			#{supAgent},
			#{supCorporateIdno},
			#{supAgentIdno},
			#{supCorporateJob},
			#{supAgentJob},
			#{supCorporateMobile},
			#{supAgentMobile},
			#{supPostCode},
			#{supContact},
			#{supEmail},
			#{supAddress},
			#{supSalesman},
			#{supProjectState},
			#{isStopTrans},
			#{extField1},
			#{extField2},
			#{extField3},
			#{remark}
		)
	</insert>
	
	<update id="update">
		UPDATE doc_supplier SET 	
			sup_code = #{supCode},
			sup_name = #{supName},
			sup_short_name = #{supShortName},
			sup_type = #{archiveSupplier.id},
			sup_area = #{supArea},
			sup_industry = #{supIndustry},
			sup_settle = #{supSettle},
			sup_licence = #{supLicence},
			sup_taxno = #{supTaxno},
			sup_bank = #{supBank},
			sup_account = #{supAccount},
			sup_corporate = #{supCorporate},
			sup_agent = #{supAgent},
			sup_corporate_idno = #{supCorporateIdno},
			sup_agent_idno = #{supAgentIdno},
			sup_corporate_job = #{supCorporateJob},
			sup_agent_job = #{supAgentJob},
			sup_corporate_mobile = #{supCorporateMobile},
			sup_agent_mobile = #{supAgentMobile},
			sup_post_code = #{supPostCode},
			sup_contact = #{supContact},
			sup_email = #{supEmail},
			sup_address = #{supAddress},
			sup_salesman = #{supSalesman},
			sup_project_state = #{supProjectState},
			is_stop_trans = #{isStopTrans},
			ext_field1 = #{extField1},
			ext_field2 = #{extField2},
			ext_field3 = #{extField3},
			remark = #{remark}
		WHERE id = #{id}
	</update>
	
	<update id="delete">
		DELETE FROM doc_supplier
		WHERE id = #{id}
	</update>
	<select id="treeData" resultType="DocSupplier">
		select * from doc_supplier
		<choose>
			<when test="page !=null and page.orderBy != null and page.orderBy != ''">
				ORDER BY ${page.orderBy}
			</when>
		</choose>
	</select>
	
</mapper>